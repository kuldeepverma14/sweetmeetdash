import{u as N,o as v,j as e,B as c}from"./index-BYiP2-EI.js";import{u as w}from"./index.esm-DBCRUks4.js";import{a as y}from"./axios-CCb-kr4I.js";import{B as k}from"./Button-MTqpEF5K.js";const F=()=>{const{register:t,handleSubmit:m,formState:{errors:s},setValue:d,reset:u,watch:p}=w(),{uid:b}=N(),x=v(),h=new URLSearchParams(x.search).get("username"),f=(l,o)=>{const a=l.target.files[0],r=new FileReader;r.onloadend=()=>{d(o,r.result)},r.readAsDataURL(a)},g=l=>{const a=Array.from(l.target.files).map(r=>{const i=new FileReader;return new Promise(n=>{i.onloadend=()=>{n(i.result)},i.readAsDataURL(r)})});Promise.all(a).then(r=>{const n=[...p("images")||[],...r];d("images",n),console.log("Updated Images Array:",n)})},j=async l=>{var o;console.log(" Data:",l);try{const a=await y.post(`http://sweet_meet_backend.fapjoymall.com/sweetmeet/agentdetails/${b}`,l);console.log("Response:",a),a.status===201?(u(),c.success(`Agent with id ${(o=a==null?void 0:a.data)==null?void 0:o.id} created successfully!`)):c.error("Failed to add agent. Please try again.")}catch(a){console.error("Error:",a)}};return e.jsxs("div",{className:"bg-[#F8F9FA] h-screen px-6 py-8 mb-20",children:[e.jsxs("h1",{className:"font-bold text-2xl",children:["Add ",h," Details"]}),e.jsxs("form",{onSubmit:m(j),className:"mt-5 w-full xl:w-[60%] shadow-lg rounded-lg bg-white border border-border p-5 mx-auto",children:[e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block mt-5 font-medium",children:"Mobile:"}),e.jsx("input",{className:"border border-border rounded-md outline-none block w-full pl-2 p-2.5",type:"text",...t("mobile")}),s.mobile&&e.jsx("p",{children:s.mobile.message})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block mt-5 font-medium",children:"Video Rate:"}),e.jsx("input",{className:"border border-border rounded-md outline-none block w-full pl-2 p-2.5",type:"number",...t("video_rate")}),s.video_rate&&e.jsx("p",{children:s.video_rate.message})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block mt-5 font-medium",children:"Online Status:"}),e.jsxs("select",{...t("online_status"),className:"border border-border rounded-md outline-none block w-full pl-2 p-2.5",children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"0",children:"Offline"}),e.jsx("option",{value:"1",children:"Online"}),e.jsx("option",{value:"2",children:"Busy"})]}),s.online_status&&e.jsx("p",{children:s.online_status.message})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block mt-5 font-medium",children:"Profile Picture:"}),e.jsx("input",{className:"border border-border rounded-md outline-none block w-full pl-2 p-2.5",type:"file",accept:"image/*",onChange:l=>f(l,"profile_pic")}),s.profile_pic&&e.jsx("p",{children:s.profile_pic.message})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block mt-5 font-medium",children:"Upload Images:"}),e.jsx("input",{className:"border border-border rounded-md outline-none block w-full pl-2 p-2.5",type:"file",accept:"image/*",multiple:!0,onChange:g}),s.images&&e.jsx("p",{children:s.images.message})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block mt-5 font-medium",children:"Description:"}),e.jsx("textarea",{className:"border border-border rounded-md outline-none block w-full pl-2 p-2.5",...t("description")}),s.description&&e.jsx("p",{className:"text-red-500 text-sm",children:s.description.message})]}),e.jsx("div",{className:"mt-10 flex justify-center",children:e.jsx(k,{variant:"primary",size:"md",type:"submit",children:"Submit"})})]})]})};export{F as default};
